<?xml version="1.0" encoding="UTF-8" ?>
<queries 
    application="Rubicon.SecurityManager" 
    xmlns="http://www.rubicon-it.com/Data/DomainObjects/Queries/1.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.rubicon-it.com/Data/DomainObjects/Queries/1.0 ..\DomainObjects\queries.xsd">

  <query id="Rubicon.SecurityManager.Domain.Metadata.SecurableClassDefinition.FindByName" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [SecurableClassDefinitionView] WHERE Name = @name;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.Metadata.SecurableClassDefinition.FindAll" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [SecurableClassDefinitionView] ORDER BY [Index] ASC;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.Metadata.SecurableClassDefinition.FindAllBaseClasses" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [SecurableClassDefinitionView] WHERE BaseSecurableClassID IS NULL ORDER BY [Index] ASC;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.Metadata.MetadataObject.Find" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [MetadataObjectView] WHERE MetadataItemID = @metadataItemID;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.Metadata.MetadataObject.Find.StateDefinition" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM StateDefinitionView
      INNER JOIN StatePropertyDefinitionView ON StateDefinitionView.StatePropertyID = StatePropertyDefinitionView.ID
      WHERE StatePropertyDefinitionView.MetadataItemID = @metadataItemID
      AND StateDefinitionView.Value = @stateValue;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.Metadata.AbstractRoleDefinition.FindAll" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [AbstractRoleDefinitionView] ORDER BY [Index] ASC;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.OrganizationalStructure.User.FindByUserName" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [UserView] WHERE UserName = @userName;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.OrganizationalStructure.Group.FindByUnqiueIdentifier" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [GroupView] WHERE [UniqueIdentifier] = @uniqueIdentifier;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.OrganizationalStructure.User.FindByClientID" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [UserView] WHERE ClientID = @clientID ORDER BY LastName;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.OrganizationalStructure.Group.FindByClientID" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [GroupView] WHERE ClientID = @clientID ORDER BY Name;
    </statement>
  </query>
  
  <query id="Rubicon.SecurityManager.Domain.OrganizationalStructure.GroupType.FindByClientID" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [GroupTypeView] WHERE ClientID = @clientID ORDER BY Name;
    </statement>
  </query>
  
  <query id="Rubicon.SecurityManager.Domain.OrganizationalStructure.Position.FindByClientID" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [PositionView] WHERE ClientID = @clientID ORDER BY Name;
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.OrganizationalStructure.Position.FindAll" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [PositionView];
    </statement>
  </query>

  <query id="Rubicon.SecurityManager.Domain.Metadata.Culture.Find" type="collection">
    <storageProviderID>SecurityManager</storageProviderID>
    <statement>
      SELECT * FROM [CultureView] WHERE CultureName = @cultureName;
    </statement>
  </query>
</queries>
