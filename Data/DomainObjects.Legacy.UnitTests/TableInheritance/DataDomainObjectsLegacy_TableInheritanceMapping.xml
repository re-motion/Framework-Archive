<?xml version="1.0" encoding="UTF-8"?>

<mapping application="UnitTests" xmlns="http://www.re-motion.org/Data/DomainObjects/Mapping/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.re-motion.org/Data/DomainObjects/Mapping/1.0 ..\..\DomainObjects\Schemas\Mapping.xsd">
  <classes>
    <class id="Client">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.Client, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_Client"></entity>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="Name">
          <type>string</type>
          <column>Name</column>
          <maxLength>100</maxLength>
        </property>
        <relationProperty relationID="ClientToDomainBase" name="AssignedObjects" cardinality="many" isMandatory="false">
          <sortExpression>CreatedAt asc</sortExpression>
        </relationProperty>
      </properties>
    </class>

    <class id="HistoryEntry">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.HistoryEntry, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_HistoryEntry"></entity>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="HistoryDate">
          <type>dateTime</type>
          <column>HistoryDate</column>
        </property>
        <property name="Text">
          <type>string</type>
          <column>Text</column>
          <maxLength>250</maxLength>
        </property>
        <relationProperty relationID="DomainBaseToHistoryEntry" name="Owner" cardinality="one" isMandatory="true">
          <column>OwnerID</column>          
        </relationProperty>
      </properties>
    </class>

    <class id="AbstractClassWithoutDerivations">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.AbstractClassWithoutDerivations, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <relationProperty relationID="DomainBaseToAbstractClassWithoutDerivations" name="DomainBase" cardinality="one" isMandatory="false">
          <column>DomainBaseID</column>
        </relationProperty>
      </properties>  
    </class>

    <class id="DomainBase">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.DomainBase, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="CreatedBy">
          <type>string</type>
          <column>CreatedBy</column>
          <maxLength>100</maxLength>
        </property>
        <property name="CreatedAt">
          <type>dateTime</type>
          <column>CreatedAt</column>
        </property>
        <relationProperty relationID="ClientToDomainBase" name="Client" cardinality="one" isMandatory="false">
          <column>ClientID</column>
        </relationProperty>
        <relationProperty relationID="DomainBaseToHistoryEntry" name="HistoryEntries" cardinality="many" isMandatory="false">
          <sortExpression>HistoryDate desc</sortExpression>
        </relationProperty>
        <relationProperty relationID="DomainBaseToAbstractClassWithoutDerivations" name="AbstractClassesWithoutDerivations" cardinality="many" isMandatory="false" />
      </properties>
    </class>

    <class id="Person" baseClass="DomainBase">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.Person, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_Person" />
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="FirstName">
          <type>string</type>
          <column>FirstName</column>
          <maxLength>100</maxLength>
        </property>
        <property name="LastName">
          <type>string</type>
          <column>LastName</column>
          <maxLength>100</maxLength>
        </property>
        <property name="DateOfBirth">
          <type>dateTime</type>
          <column>DateOfBirth</column>
        </property>
        <property name="Photo">
          <type>binary</type>
          <column>Photo</column>
          <nullable>true</nullable>
        </property>
        <relationProperty relationID="PersonToAddress" name="Address" cardinality="one" isMandatory="false" />
      </properties>
    </class>

    <class id="Customer" baseClass="Person">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.Customer, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="CustomerType">
          <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.CustomerType, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
          <column>CustomerType</column>
        </property>
        <property name="CustomerSince">
          <type>dateTime</type>
          <column>CustomerSince</column>
        </property>
        <relationProperty relationID="RegionToCustomer" name="Region" cardinality="one" isMandatory="false" >
          <column>RegionID</column>
        </relationProperty>
        <relationProperty relationID="OrderToCustomer" name="Orders" cardinality="many" isMandatory="false"/>
      </properties>
    </class>

    <class id="OrganizationalUnit" baseClass="DomainBase">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.OrganizationalUnit, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_OrganizationalUnit" />
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="Name">
          <type>string</type>
          <column>Name</column>
          <maxLength>100</maxLength>
        </property>
      </properties>
    </class>

    <class id="Region">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.Region, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_Region"/>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="Name">
          <type>string</type>
          <column>Name</column>
          <maxLength>100</maxLength>
        </property>
        <relationProperty relationID="RegionToCustomer" name="Customers" cardinality="many" isMandatory="false" />
      </properties>
    </class>

    <class id="Order">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.Order, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_Order"/>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="Number">
          <type>int32</type>
          <column>Number</column>
        </property>
        <property name="OrderDate">
          <type>dateTime</type>
          <column>OrderDate</column>
        </property>
        <relationProperty relationID="OrderToCustomer" name="Customer" cardinality="one" isMandatory="false">
          <column>CustomerID</column>
        </relationProperty>
      </properties>
    </class>

    <class id="Address">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.Address, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_Address" />
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="Street">
          <type>string</type>
          <column>Street</column>
          <maxLength>100</maxLength>
        </property>
        <property name="Zip">
          <type>string</type>
          <column>Zip</column>
          <maxLength>10</maxLength>
        </property>
        <property name="City">
          <type>string</type>
          <column>City</column>
          <maxLength>100</maxLength>
        </property>
        <property name="Country">
          <type>string</type>
          <column>Country</column>
          <maxLength>100</maxLength>
        </property>
        <relationProperty relationID="PersonToAddress" name="Person" cardinality="one" isMandatory="true">
          <column>PersonID</column>
        </relationProperty>
      </properties>
    </class>

    <class id="FileSystemItem">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.FileSystemItem, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="Name">
          <type>string</type>
          <column>Name</column>
          <maxLength>100</maxLength>
        </property>
        <relationProperty relationID="FolderToFileSystemItem" name="ParentFolder" cardinality="one" isMandatory="false">
          <column>ParentFolderID</column>
        </relationProperty>
      </properties>
    </class>

    <class id="Folder" baseClass="FileSystemItem">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.Folder, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_Folder"/>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <!-- A property with the same name but different column name exists class Folder which is valid 
             because it is a different derivation branch of class FileSystemItem -->
        <property name="CreatedAt">
          <type>dateTime</type>
          <column>FolderCreatedAt</column>
        </property>
        <relationProperty relationID="FolderToFileSystemItem" name="FileSystemItems" cardinality="many" isMandatory="false">
          <sortExpression>Name ASC</sortExpression>
        </relationProperty>
      </properties>
    </class>

    <class id="File" baseClass="FileSystemItem">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.File, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_File"/>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="Size">
          <type>int32</type>
          <column>Size</column>
        </property>
        <!-- A property with the same name but different column name exists class File which is valid 
             because it is a different derivation branch of class FileSystemItem -->
        <property name="CreatedAt">
          <type>dateTime</type>
          <column>FileCreatedAt</column>
        </property>
      </properties>
    </class>

    <class id="AbstractBaseClassWithHierarchy">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.AbstractBaseClassWithHierarchy, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <property name="Name">
          <type>string</type>
          <column>Name</column>
          <maxLength>100</maxLength>
        </property>
        <relationProperty relationID="AbstractBaseClassWithHierarchy" name="ParentAbstractBaseClassWithHierarchy" cardinality="one" isMandatory="false">
          <column>ParentAbstractBaseClassWithHierarchyID</column>
        </relationProperty>
        <relationProperty relationID="AbstractBaseClassWithHierarchy" name="ChildAbstractBaseClassesWithHierarchy" cardinality="many" isMandatory="false">
          <sortExpression>Name DESC</sortExpression>
        </relationProperty>
        <relationProperty relationID="ClientToAbstractBaseClassWithHierarchy" name="ClientFromAbstractBaseClass" cardinality="one" isMandatory="false">
          <column>ClientFromAbstractBaseClassID</column>
          <oppositeClass>Client</oppositeClass>
        </relationProperty>
        <relationProperty relationID="FileSystemItemToAbstractBaseClassWithHierarchy" name="FileSystemItemFromAbstractBaseClass" cardinality="one" isMandatory="false">
          <column>FileSystemItemFromAbstractBaseClassID</column>
          <oppositeClass>FileSystemItem</oppositeClass>
        </relationProperty>
      </properties>
    </class>

    <class id="DerivedClassWithEntityWithHierarchy" baseClass="AbstractBaseClassWithHierarchy">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.DerivedClassWithEntityWithHierarchy, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_DerivedClassWithEntityWithHierarchy"/>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <relationProperty relationID="DerivedClassWithEntityWithHierarchy" name="ParentDerivedClassWithEntityWithHierarchy" cardinality="one" isMandatory="false">
          <column>ParentDerivedClassWithEntityWithHierarchyID</column>
        </relationProperty>
        <relationProperty relationID="DerivedClassWithEntityWithHierarchy" name="ChildDerivedClassesWithEntityWithHierarchy" cardinality="many" isMandatory="false">
          <sortExpression>Name ASC</sortExpression>
        </relationProperty>
        <relationProperty relationID="ClientToDerivedClassWithEntityWithHierarchy" name="ClientFromDerivedClassWithEntity" cardinality="one" isMandatory="false">
          <column>ClientFromDerivedClassWithEntityID</column>
          <oppositeClass>Client</oppositeClass>
        </relationProperty>
        <relationProperty relationID="FileSystemItemToDerivedClassWithEntityWithHierarchy" name="FileSystemItemFromDerivedClassWithEntity" cardinality="one" isMandatory="false">
          <column>FileSystemItemFromDerivedClassWithEntityID</column>
          <oppositeClass>FileSystemItem</oppositeClass>
        </relationProperty>
      </properties>
    </class>

    <class id="DerivedClassWithEntityFromBaseClassWithHierarchy" baseClass="DerivedClassWithEntityWithHierarchy">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.DerivedClassWithEntityFromBaseClassWithHierarchy, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <relationProperty relationID="DerivedClassWithEntityFromBaseClassWithHierarchy" name="ParentDerivedClassWithEntityFromBaseClassWithHierarchy" cardinality="one" isMandatory="false">
          <column>ParentDerivedClassWithEntityFromBaseClassWithHierarchyID</column>
        </relationProperty>
        <relationProperty relationID="DerivedClassWithEntityFromBaseClassWithHierarchy" name="ChildDerivedClassesWithEntityFromBaseClassWithHierarchy" cardinality="many" isMandatory="false">
          <sortExpression>Name ASC</sortExpression>
        </relationProperty>
        <relationProperty relationID="ClientToDerivedClassWithEntityFromBaseClassWithHierarchy" name="ClientFromDerivedClassWithEntityFromBaseClass" cardinality="one" isMandatory="false">
          <column>ClientFromDerivedClassWithEntityFromBaseClassID</column>
          <oppositeClass>Client</oppositeClass>
        </relationProperty>
        <relationProperty relationID="FileSystemItemToDerivedClassWithEntityFromBaseClassWithHierarchy" name="FileSystemItemFromDerivedClassWithEntityFromBaseClass" cardinality="one" isMandatory="false">
          <column>FileSystemItemFromDerivedClassWithEntityFromBaseClassID</column>
          <oppositeClass>FileSystemItem</oppositeClass>
        </relationProperty>
      </properties>
    </class>

    <!-- Classes with invalid database structure for exception testing only -->

    <class id="BaseClassWithInvalidRelationClassIDColumns">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.BaseClassWithInvalidRelationClassIDColumns, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <entity name="TableInheritance_BaseClassWithInvalidRelationClassIDColumns" />
      <storageProviderID>TestDomain</storageProviderID>
      <properties>
        <relationProperty 
            relationID="BaseClassWithInvalidRelationClassIDColumns_To_Client" 
            name="Client" 
            cardinality="one" 
            isMandatory="false">
          <column>ClientID</column>
          <oppositeClass>Client</oppositeClass>
        </relationProperty>
        <relationProperty 
            relationID="BaseClassWithInvalidRelationClassIDColumns_To_DomainBase" 
            name="DomainBase" 
            cardinality="one" 
            isMandatory="false">
          <column>DomainBaseID</column>
          <oppositeClass>DomainBase</oppositeClass>
        </relationProperty>
        <relationProperty
            relationID="BaseClassWithInvalidRelationClassIDColumns_To_DomainBase_WithInvalidClassIDValue"
            name="DomainBaseWithInvalidClassIDValue"
            cardinality="one"
            isMandatory="false">
          <column>DomainBaseWithInvalidClassIDValueID</column>
          <oppositeClass>DomainBase</oppositeClass>
        </relationProperty>
        <relationProperty
            relationID="BaseClassWithInvalidRelationClassIDColumns_To_DomainBase_WithInvalidClassIDNullValue"
            name="DomainBaseWithInvalidClassIDNullValue"
            cardinality="one"
            isMandatory="false">
          <column>DomainBaseWithInvalidClassIDNullValueID</column>
          <oppositeClass>DomainBase</oppositeClass>
        </relationProperty>
      </properties>
    </class>

    <class id="DerivedClassWithInvalidRelationClassIDColumns" baseClass="BaseClassWithInvalidRelationClassIDColumns">
      <type>Remotion.Data.DomainObjects.Legacy.UnitTests.TableInheritance.TestDomain.DerivedClassWithInvalidRelationClassIDColumns, Remotion.Data.DomainObjects.Legacy.UnitTests</type>
      <storageProviderID>TestDomain</storageProviderID>
      <properties />
    </class>
  </classes>
</mapping>
